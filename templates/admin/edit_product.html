{% extends "admin/base_admin.html" %}
{% block content %}
    <div class="admin-header">
        <h1><i class="fas fa-edit"></i> Редактировать товар</h1>
        <a href="{{ url_for('admin_products') }}" class="btn btn-secondary"> <!-- Исправлен URL -->
            <i class="fas fa-arrow-left"></i> Назад
        </a>
    </div>

    <form method="POST" enctype="multipart/form-data" class="admin-form">
        {{ form.hidden_tag() }} <!-- CSRF-токен добавлен -->
        <div class="form-group">
            <label>Название товара</label>
            {{ form.name(class="form-control", value=product.name, required=True) }}
        </div>
        <div class="form-group">
            <label>Описание</label>
            {{ form.description(class="form-control", rows=4) }}
        </div>
        <div class="form-group">
            <label>Цена ($)</label>
            {{ form.price(class="form-control", value=product.price, step="0.01", required=True) }}
        </div>
        <div class="form-group">
            <label>Текущее изображение</label>
            <img src="{{ url_for('static', filename=product.image) }}" 
                 class="current-image" 
                 alt="{{ product.name }}">
            {{ form.image(class="form-control-file") }}
        </div>
        <button type="submit" class="btn btn-primary">
            <i class="fas fa-save"></i> Обновить
        </button>
    </form>
{% endblock %}